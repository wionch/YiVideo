# YiVideo 项目文档编写规范

## 1. 概述
本文档旨在为 YiVideo 项目的所有文档贡献者提供一套统一的编写规范，以确保文档的清晰性、一致性和可维护性。

## 2. 核心原则
- **清晰性**: 使用简洁明了的语言。
- **一致性**: 遵循统一的术语、格式和结构。
- **准确性**: 确保信息与当前代码实现保持同步。
- **易用性**: 方便开发者和运维人员快速查找所需信息。

## 3. 格式与风格
### 3.1. 文件命名
- 使用大写字母和下划线（UPPER_SNAKE_CASE），例如 `SYSTEM_ARCHITECTURE.md`。
- 文件名应准确反映文档内容。

### 3.2. 术语一致性
- **GPU 锁**: 统一使用 `GPU 锁` 或 `SmartGpuLockManager`，避免混用 `GPU Lock` 等其他表述。
- **服务名称**: 遵循 `docker-compose.yml` 中的服务名，例如 `faster_whisper_service`。
- **核心概念**: 对核心概念（如 `工作流`、`节点`、`上下文`）使用一致的中文术语。

### 3.3. 日期格式
- 所有文档末尾必须包含“最后更新”标识。
- 格式统一为：`*最后更新: YYYY-MM-DD | 文档版本: X.X*`
  - 示例: `*最后更新: 2025-11-09 | 文档版本: 1.0*`

### 3.4. API 端点与端口
- **端口**: 所有 API 示例（如 `curl` 命令）中，统一使用端口 `8788`。
- **路径**: 完整展示 API 路径，例如 `POST /v1/workflows`。

### 3.5. 代码示例
- 使用 Markdown 的代码块语法，并明确指定语言类型（如 `bash`, `python`, `json`）。
- `curl` 示例应包含完整的请求头和请求体，并使用 `\` 进行换行，提高可读性。
  ```bash
  curl -X POST http://localhost:8788/v1/workflows \
  -H "Content-Type: application/json" \
  -d '{
      "video_path": "/share/videos/input/example.mp4",
      "workflow_config": {
          "subtitle_generation": {
              "strategy": "asr",
              "provider": "faster_whisper"
          }
      }
  }'
  ```

## 4. 内容组织
### 4.1. 目录结构
- 严格遵循 `docs/README.md` 中定义的目录分类：
  - `product/`: 产品与架构设计。
  - `technical/deployment/`: 部署与配置。
  - `technical/reference/`: 技术参考。
  - `technical/troubleshooting/`: 故障排除。

### 4.2. 内容去重
- 在创建新文档或章节前，检查现有文档是否已包含相关内容。
- 优先通过链接指向现有内容，而不是复制粘贴。
- 对于高度相关但分散的内容，应考虑重构和合并，如之前对 `GPU_LOCK_COMPLETE_GUIDE.md` 的重构。

### 4.3. 参数文档
- 在记录函数、API 或配置参数时，应提供清晰的表格。
- 表格应至少包含：**参数名**、**类型**、**是否必需**、**默认值**和**描述**。
  - 示例：
    | 参数 | 类型 | 是否必需 | 默认值 | 描述 |
    | :--- | :--- | :--- | :--- | :--- |
    | `timeout` | `int` | 否 | `1800` | GPU 锁的超时时间（秒）。 |
    | `poll_interval` | `float`| 否 | `0.5` | 获取锁的轮询间隔（秒）。 |


## 5. 文档更新流程
1. **修改代码后**: 必须同步更新受影响的文档。
2. **添加新功能**: 必须创建或更新相关文档。
3. **提交 PR 前**: 检查相关文档是否已按此规范更新。

---
*最后更新: 2025-11-09 | 文档版本: 1.0*
