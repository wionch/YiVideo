# 任务清单：添加YiVideo API HTTP请求详细功能说明文档

## 任务ID
add-api-docs

## 总体任务
为YiVideo项目创建完整、详细的API HTTP请求功能说明文档

---

## 任务列表

### 任务1：创建API概览文档
**文件**: `docs/api/README.md`
**描述**: 创建API总体介绍和快速导航文档
**验收标准**:
- [ ] API总体介绍和架构说明
- [ ] 认证和授权说明
- [ ] 错误处理规范
- [ ] 速率限制说明
- [ ] 四个API模块的导航链接

### 任务2：创建工作流API文档
**文件**: `docs/api/WORKFLOW_API.md`
**描述**: 详细文档化工作流相关API端点
**包含端点**:
- [ ] POST /v1/workflows - 创建或增量执行工作流
- [ ] GET /v1/workflows/status/{workflow_id} - 查询工作流状态
- [ ] GET /test, POST /test - 测试端点
- [ ] GET / - 根路径健康检查
**验收标准**:
- [ ] 每个端点的完整参数说明
- [ ] 请求/响应示例
- [ ] 状态码和错误处理
- [ ] 工作流配置示例

### 任务3：创建单任务API文档
**文件**: `docs/api/SINGLE_TASK_API.md`
**描述**: 详细文档化单任务执行相关API端点
**包含端点**:
- [ ] POST /v1/tasks - 创建并执行单个任务
- [ ] GET /v1/tasks/{task_id}/status - 查询任务状态
- [ ] GET /v1/tasks/{task_id}/result - 获取任务结果
- [ ] POST /v1/tasks/{task_id}/retry - 重试失败任务
- [ ] DELETE /v1/tasks/{task_id} - 取消任务
- [ ] GET /v1/tasks/health - 健康检查
- [ ] GET /v1/tasks/supported-tasks - 支持的任务列表
**验收标准**:
- [ ] 每个端点的完整参数说明
- [ ] 任务状态流转说明
- [ ] callback机制说明
- [ ] 支持的任务类型列表

### 任务4：创建文件操作API文档
**文件**: `docs/api/FILE_OPERATIONS_API.md`
**描述**: 详细文档化文件和目录管理API端点
**包含端点**:
- [ ] POST /v1/files/upload - 上传文件到MinIO
- [ ] GET /v1/files/download/{file_path} - 从MinIO下载文件
- [ ] DELETE /v1/files/{file_path} - 删除MinIO文件
- [ ] DELETE /v1/files/directories - 删除本地目录
**验收标准**:
- [ ] 文件上传/下载流程说明
- [ ] MinIO存储桶管理
- [ ] 本地目录操作安全说明
- [ ] 文件类型和大小限制

### 任务5：创建监控API文档
**文件**: `docs/api/MONITORING_API.md`
**描述**: 详细文档化系统监控和管理API端点
**包含端点**:
- [ ] GPU锁监控端点（状态、健康、释放）
- [ ] 监控器管理（启动、停止、状态）
- [ ] 心跳管理（任务心跳、清理）
- [ ] 超时管理（检查、配置）
- [ ] 统计信息（系统统计、健康检查）
**验收标准**:
- [ ] 监控数据格式说明
- [ ] 健康检查标准
- [ ] 故障排查指导
- [ ] 性能指标说明

### 任务6：创建快速开始指南
**文件**: `docs/api/QUICK_START.md`
**描述**: 提供API快速上手指南和常见场景示例
**验收标准**:
- [ ] 5分钟快速开始教程
- [ ] 完整的工作流执行示例
- [ ] 常见错误和解决方案
- [ ] 最佳实践建议
- [ ] 代码示例（cURL、Python）

### 任务7：更新文档索引
**文件**: `docs/README.md`
**描述**: 更新文档目录，添加API文档索引
**验收标准**:
- [ ] 在文档目录中添加API部分
- [ ] 提供所有API文档的链接
- [ ] 更新版本信息和最后更新时间

---

## 实施顺序
1. API概览文档（任务1）
2. 工作流API文档（任务2）
3. 单任务API文档（任务3）
4. 文件操作API文档（任务4）
5. 监控API文档（任务5）
6. 快速开始指南（任务6）
7. 更新文档索引（任务7）

## 依赖关系
- 所有文档相互独立，可以并行创建
- 任务7依赖于任务1-6的完成

## 预估工作量
- 每个API模块文档：2-3小时
- 快速开始指南：1-2小时
- 文档索引更新：0.5小时
- **总计**：约12-16小时

## 质量标准
- 文档必须与实际API实现一致
- 所有示例必须经过验证
- 错误处理说明必须完整
- 代码示例必须可执行
- 文档格式必须统一（遵循现有DELETE_directories.md的风格）

## 验证方法
- 对照API源代码验证文档准确性
- 测试所有示例代码
- 检查文档链接和导航
- 验证Markdown格式正确性
